


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > StudentService</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">services</a>
</div>

<h1>Coverage Summary for Class: StudentService (services)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">StudentService</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    53.3%
  </span>
  <span class="absValue">
    (8/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    33.3%
  </span>
  <span class="absValue">
    (24/72)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    27.5%
  </span>
  <span class="absValue">
    (30/109)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package services;
&nbsp;
&nbsp;import models.Student;
&nbsp;import models.HonorsStudent;
&nbsp;import models.RegularStudent;
&nbsp;import models.Grade;
&nbsp;import models.Subject;
&nbsp;import models.CoreSubject;
&nbsp;import models.ElectiveSubject;
&nbsp;import exceptions.*;
&nbsp;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.Date;
&nbsp;import java.util.List;
&nbsp;import java.util.regex.Pattern;
&nbsp;
&nbsp;/**
&nbsp; * Handles student-related operations such as adding, searching, and listing students.
&nbsp; */
&nbsp;public class StudentService {
&nbsp;    private final Student[] students;
&nbsp;    private int studentCount;
&nbsp;
&nbsp;//    REGULAR EXPRESSION FOR EMAIL VALIDATION
<b class="fc">&nbsp;    private static final Pattern EMAIL_PATTERN = Pattern.compile(</b>
&nbsp;            &quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$&quot;
&nbsp;    );
&nbsp;
&nbsp;    /**
&nbsp;     * Constructs a StudentService with a specified maximum number of students.
&nbsp;     * @param maxStudents Maximum number of students that can be stored.
&nbsp;     */
<b class="fc">&nbsp;    public StudentService(int maxStudents) {</b>
<b class="fc">&nbsp;        students = new Student[maxStudents];</b>
<b class="fc">&nbsp;        studentCount = 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Validates the format of an email address.
&nbsp;     * @param email Email address to validate.
&nbsp;     * @return true if the email is valid, false otherwise.
&nbsp;     */
&nbsp;    public boolean isValidEmail(String email) {
<b class="fc">&nbsp;        return EMAIL_PATTERN.matcher(email).matches();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Checks if a student with the given name and email already exists.
&nbsp;     * @param name Student name.
&nbsp;     * @param email Student email.
&nbsp;     * @return true if duplicate exists, false otherwise.
&nbsp;     */
&nbsp;    public boolean isDuplicateStudent(String name, String email) {
<b class="fc">&nbsp;        for (int i = 0; i &lt; studentCount; i++) {</b>
<b class="fc">&nbsp;            Student s = students[i];</b>
<b class="pc">&nbsp;            if (s.getName().equalsIgnoreCase(name) &amp;&amp; s.getEmail().equalsIgnoreCase(email)) {</b>
<b class="fc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a new student to the system.
&nbsp;     * @param student Student object to add.
&nbsp;     * @return true if added successfully.
&nbsp;     * @throws AppExceptions if the student database is full.
&nbsp;     */
&nbsp;    public boolean addStudent(Student student) {
<b class="pc">&nbsp;        if (studentCount &gt;= students.length) {</b>
<b class="nc">&nbsp;            throw new AppExceptions(&quot;Student database full!&quot;);</b>
&nbsp;        }
<b class="fc">&nbsp;        students[studentCount++] = student;</b>
<b class="fc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Finds a student by their ID.
&nbsp;     * @param studentID Student ID to search for.
&nbsp;     * @return Student object if found.
&nbsp;     * @throws StudentNotFoundException if not found.
&nbsp;     */
&nbsp;    public Student findStudentById(String studentID) {
<b class="fc">&nbsp;        for (int i = 0; i &lt; studentCount; i++) {</b>
<b class="fc">&nbsp;            String currentId = students[i].getStudentID();</b>
<b class="pc">&nbsp;            if (currentId != null &amp;&amp; currentId.equalsIgnoreCase(studentID)) {</b>
<b class="fc">&nbsp;                return students[i];</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        throw new StudentNotFoundException(studentID);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Searches for students by partial or full name.
&nbsp;     * @param namePart Name or part of name to search.
&nbsp;     * @return Array of matching Student objects.
&nbsp;     */
&nbsp;    public Student[] searchStudentsByName(String namePart) {
<b class="fc">&nbsp;        List&lt;Student&gt; results = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; studentCount; i++) {</b>
<b class="fc">&nbsp;            Student s = students[i];</b>
<b class="pc">&nbsp;            if (s.getName().toLowerCase().contains(namePart.toLowerCase())) {</b>
<b class="fc">&nbsp;                results.add(s);</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return results.toArray(new Student[0]);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Searches for students whose average grade falls within a specified range.
&nbsp;     * @param min Minimum average grade.
&nbsp;     * @param max Maximum average grade.
&nbsp;     * @param gradeService GradeService instance for grade lookup.
&nbsp;     * @return Array of matching Student objects.
&nbsp;     */
&nbsp;    public Student[] searchStudentsByGradeRange(double min, double max, GradeService gradeService) {
<b class="nc">&nbsp;        List&lt;Student&gt; results = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; studentCount; i++) {</b>
<b class="nc">&nbsp;            Student s = students[i];</b>
<b class="nc">&nbsp;            double avg = s.calculateAverage(gradeService);</b>
<b class="nc">&nbsp;            if (avg &gt;= min &amp;&amp; avg &lt;= max) {</b>
<b class="nc">&nbsp;                results.add(s);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return results.toArray(new Student[0]);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Searches for students by type (Honors or Regular).
&nbsp;     * @param honors true for Honors students, false for Regular students.
&nbsp;     * @return Array of matching Student objects.
&nbsp;     */
&nbsp;    public Student[] searchStudentsByType(boolean honors) {
<b class="fc">&nbsp;        List&lt;Student&gt; results = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; studentCount; i++) {</b>
<b class="fc">&nbsp;            Student s = students[i];</b>
<b class="fc">&nbsp;            if ((honors &amp;&amp; s instanceof HonorsStudent) || (!honors &amp;&amp; s instanceof RegularStudent)) {</b>
<b class="fc">&nbsp;                results.add(s);</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return results.toArray(new Student[0]);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Finds a subject by its name and type for any enrolled student.
&nbsp;     * @param name Subject name.
&nbsp;     * @param type Subject type (&quot;Core&quot;, &quot;Elective&quot;, etc.).
&nbsp;     * @return Subject object if found, null otherwise.
&nbsp;     */
&nbsp;    public Subject findSubjectByNameAndType(String name, String type) {
<b class="nc">&nbsp;        for (int i = 0; i &lt; studentCount; i++) {</b>
<b class="nc">&nbsp;            Student s = students[i];</b>
<b class="nc">&nbsp;            Subject[] enrolledSubjects = s.getEnrolledSubjects();</b>
<b class="nc">&nbsp;            if (enrolledSubjects != null) {</b>
<b class="nc">&nbsp;                for (Subject subj : enrolledSubjects) {</b>
<b class="nc">&nbsp;                    if (subj != null &amp;&amp; subj.getSubjectName().equalsIgnoreCase(name)) {</b>
<b class="nc">&nbsp;                        if ((type.equalsIgnoreCase(&quot;Core&quot;) &amp;&amp; subj instanceof CoreSubject) ||</b>
<b class="nc">&nbsp;                                (type.equalsIgnoreCase(&quot;Elective&quot;) &amp;&amp; subj instanceof ElectiveSubject) ||</b>
<b class="nc">&nbsp;                                (type.equalsIgnoreCase(&quot;Core Subject&quot;) &amp;&amp; subj instanceof CoreSubject) ||</b>
<b class="nc">&nbsp;                                (type.equalsIgnoreCase(&quot;Elective Subject&quot;) &amp;&amp; subj instanceof ElectiveSubject)) {</b>
<b class="nc">&nbsp;                            return subj;</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the current count of students.
&nbsp;     * @return Number of students.
&nbsp;     */
&nbsp;    public int getStudentCount() {
<b class="nc">&nbsp;        return studentCount;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the array of all students.
&nbsp;     * @return Array of Student objects.
&nbsp;     */
&nbsp;    public Student[] getStudents() {
<b class="nc">&nbsp;        return students;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Displays a formatted list of all students and their statistics.
&nbsp;     * @param gradeService GradeService instance for grade lookup.
&nbsp;     */
&nbsp;    public void viewAllStudents(GradeService gradeService) {
<b class="nc">&nbsp;        if (studentCount == 0) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;No students available.&quot;);</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.println(&quot;STUDENT LISTING&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;________________________________________________________________________________________________________________________________________________&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;| STUDENT ID  | NAME                  | TYPE            | AVG GRADE | STATUS       | ENROLLED SUBJECTS    | PASSING GRADE | Honors Eligible     |&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;|_______________________________________________________________________________________________________________________________________________|&quot;);</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; studentCount; i++) {</b>
<b class="nc">&nbsp;            Student student = students[i];</b>
<b class="nc">&nbsp;            double avg = student.calculateAverage(gradeService);</b>
<b class="nc">&nbsp;            System.out.printf(&quot;| %-10s | %-20s | %-15s | %-9.1f | %-12s | %-20s | %-13d | %-18s |%n&quot;,</b>
<b class="nc">&nbsp;                    student.getStudentID(),</b>
<b class="nc">&nbsp;                    student.getName(),</b>
<b class="nc">&nbsp;                    (student instanceof HonorsStudent) ? &quot;Honors&quot; : &quot;Regular&quot;,</b>
<b class="nc">&nbsp;                    avg,</b>
<b class="nc">&nbsp;                    student.getStatus(),</b>
<b class="nc">&nbsp;                    student.getEnrolledSubjectsString().length(),</b>
<b class="nc">&nbsp;                    student.getPassingGrade(),</b>
<b class="nc">&nbsp;                    (student instanceof HonorsStudent ? ((HonorsStudent)student).isHonorsEligible(gradeService) : student.isHonorsEligible()) ? &quot;Yes&quot; : &quot;No&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;|=============================================================================================================================================|&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Static method to initialize sample students and grades for demonstration or testing.
&nbsp;     * @param students Array to store students.
&nbsp;     * @param grades Array to store grades.
&nbsp;     * @param studentCountRef Reference to student count (as single-element array).
&nbsp;     * @param gradeCountRef Reference to grade count (as single-element array).
&nbsp;     */
&nbsp;    public static void initializeSampleStudents(Student[] students, Grade[] grades, int[] studentCountRef, int[] gradeCountRef) {
&nbsp;        // Core subjects
<b class="nc">&nbsp;        Subject math = new CoreSubject(&quot;Mathematics&quot;, &quot;MATH101&quot;);</b>
<b class="nc">&nbsp;        Subject english = new CoreSubject(&quot;English&quot;, &quot;ENG101&quot;);</b>
<b class="nc">&nbsp;        Subject science = new CoreSubject(&quot;Science&quot;, &quot;SCI101&quot;);</b>
&nbsp;        // Elective subjects
<b class="nc">&nbsp;        Subject art = new ElectiveSubject(&quot;Art&quot;, &quot;ART101&quot;);</b>
<b class="nc">&nbsp;        Subject pe = new ElectiveSubject(&quot;Physical Education&quot;, &quot;PE101&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        Date now = new Date();</b>
&nbsp;
&nbsp;        // Add 3 regular students
<b class="nc">&nbsp;        Student s1 = new RegularStudent(&quot;Kofi Mensah&quot;, 20, &quot;john@example.com&quot;, &quot;1234567890&quot;);</b>
<b class="nc">&nbsp;        s1.enrollSubject(math); s1.enrollSubject(english); s1.enrollSubject(science);</b>
<b class="nc">&nbsp;        s1.addGrade(100); grades[gradeCountRef[0]++] = new Grade(&quot;GRD001&quot;, s1.getStudentID(), &quot;Mathematics&quot;, &quot;Core Subject&quot;, 100, now);</b>
<b class="nc">&nbsp;        s1.addGrade(100); grades[gradeCountRef[0]++] = new Grade(&quot;GRD002&quot;, s1.getStudentID(), &quot;English&quot;, &quot;Core Subject&quot;, 100, now);</b>
<b class="nc">&nbsp;        s1.addGrade(100); grades[gradeCountRef[0]++] = new Grade(&quot;GRD003&quot;, s1.getStudentID(), &quot;Science&quot;, &quot;Core Subject&quot;, 100, now);</b>
&nbsp;
<b class="nc">&nbsp;        Student s2 = new RegularStudent(&quot;Yaa Agyei&quot;, 21, &quot;jane@example.com&quot;, &quot;2345678901&quot;);</b>
<b class="nc">&nbsp;        s2.enrollSubject(math); s2.enrollSubject(english); s2.enrollSubject(art);</b>
<b class="nc">&nbsp;        s2.addGrade(60); grades[gradeCountRef[0]++] = new Grade(&quot;GRD004&quot;, s2.getStudentID(), &quot;Mathematics&quot;, &quot;Core Subject&quot;, 60, now);</b>
<b class="nc">&nbsp;        s2.addGrade(55); grades[gradeCountRef[0]++] = new Grade(&quot;GRD005&quot;, s2.getStudentID(), &quot;English&quot;, &quot;Core Subject&quot;, 55, now);</b>
<b class="nc">&nbsp;        s2.addGrade(70); grades[gradeCountRef[0]++] = new Grade(&quot;GRD006&quot;, s2.getStudentID(), &quot;Art&quot;, &quot;Elective Subject&quot;, 70, now);</b>
&nbsp;
<b class="nc">&nbsp;        Student s3 = new RegularStudent(&quot;John Cena&quot;, 22, &quot;mike@example.com&quot;, &quot;3456789012&quot;);</b>
<b class="nc">&nbsp;        s3.enrollSubject(science); s3.enrollSubject(art); s3.enrollSubject(pe);</b>
<b class="nc">&nbsp;        s3.addGrade(40); grades[gradeCountRef[0]++] = new Grade(&quot;GRD007&quot;, s3.getStudentID(), &quot;Science&quot;, &quot;Core Subject&quot;, 40, now);</b>
<b class="nc">&nbsp;        s3.addGrade(50); grades[gradeCountRef[0]++] = new Grade(&quot;GRD008&quot;, s3.getStudentID(), &quot;Art&quot;, &quot;Elective Subject&quot;, 50, now);</b>
<b class="nc">&nbsp;        s3.addGrade(60); grades[gradeCountRef[0]++] = new Grade(&quot;GRD009&quot;, s3.getStudentID(), &quot;Physical Education&quot;, &quot;Elective Subject&quot;, 60, now);</b>
&nbsp;
&nbsp;        // Add 2 honors students
<b class="nc">&nbsp;        Student s4 = new HonorsStudent(&quot;Afia Oduro&quot;, 20, &quot;sarah@example.com&quot;, &quot;4567890123&quot;);</b>
<b class="nc">&nbsp;        s4.enrollSubject(math); s4.enrollSubject(english); s4.enrollSubject(pe);</b>
<b class="nc">&nbsp;        s4.addGrade(85); grades[gradeCountRef[0]++] = new Grade(&quot;GRD010&quot;, s4.getStudentID(), &quot;Mathematics&quot;, &quot;Core Subject&quot;, 85, now);</b>
<b class="nc">&nbsp;        s4.addGrade(90); grades[gradeCountRef[0]++] = new Grade(&quot;GRD011&quot;, s4.getStudentID(), &quot;English&quot;, &quot;Core Subject&quot;, 90, now);</b>
<b class="nc">&nbsp;        s4.addGrade(88); grades[gradeCountRef[0]++] = new Grade(&quot;GRD012&quot;, s4.getStudentID(), &quot;Physical Education&quot;, &quot;Elective Subject&quot;, 88, now);</b>
&nbsp;
<b class="nc">&nbsp;        Student s5 = new HonorsStudent(&quot;David Goliath&quot;, 21, &quot;david@example.com&quot;, &quot;5678901234&quot;);</b>
<b class="nc">&nbsp;        s5.enrollSubject(science); s5.enrollSubject(art); s5.enrollSubject(pe);</b>
<b class="nc">&nbsp;        s5.addGrade(70); grades[gradeCountRef[0]++] = new Grade(&quot;GRD013&quot;, s5.getStudentID(), &quot;Science&quot;, &quot;Core Subject&quot;, 70, now);</b>
<b class="nc">&nbsp;        s5.addGrade(65); grades[gradeCountRef[0]++] = new Grade(&quot;GRD014&quot;, s5.getStudentID(), &quot;Art&quot;, &quot;Elective Subject&quot;, 65, now);</b>
<b class="nc">&nbsp;        s5.addGrade(75); grades[gradeCountRef[0]++] = new Grade(&quot;GRD015&quot;, s5.getStudentID(), &quot;Physical Education&quot;, &quot;Elective Subject&quot;, 75, now);</b>
&nbsp;
<b class="nc">&nbsp;        students[studentCountRef[0]++] = s1;</b>
<b class="nc">&nbsp;        students[studentCountRef[0]++] = s2;</b>
<b class="nc">&nbsp;        students[studentCountRef[0]++] = s3;</b>
<b class="nc">&nbsp;        students[studentCountRef[0]++] = s4;</b>
<b class="nc">&nbsp;        students[studentCountRef[0]++] = s5;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the student count (used for administrative purposes).
&nbsp;     * @param count New student count.
&nbsp;     */
&nbsp;    public void setStudentCount(int count) {
<b class="nc">&nbsp;        this.studentCount = count;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-12-08 13:53</div>
</div>
</body>
</html>
